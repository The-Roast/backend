{"ast":null,"code":"import _regeneratorRuntime from \"/Users/michaelli/Desktop/the-roast/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/michaelli/Desktop/the-roast/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/michaelli/Desktop/the-roast/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectSpread from \"/Users/michaelli/Desktop/the-roast/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { b, c, d } from './chunk-VO7VPLVP.js';\nimport { useEffectAsync, useMemoAsync } from '@chengsokdara/react-hooks-async';\nimport { useRef, useState, useEffect } from 'react';\nvar ne = {\n    apiKey: \"\",\n    autoStart: !1,\n    autoTranscribe: !0,\n    mode: \"transcriptions\",\n    nonStop: !1,\n    removeSilence: !1,\n    stopTimeout: 5e3,\n    streaming: !1,\n    timeSlice: 1e3,\n    onDataAvailable: void 0,\n    onTranscribe: void 0\n  },\n  oe = {\n    stop: void 0\n  },\n  ae = {\n    blob: void 0,\n    text: void 0\n  },\n  ue = function ue(P) {\n    var _ne$P = _objectSpread(_objectSpread({}, ne), P),\n      m = _ne$P.apiKey,\n      A = _ne$P.autoStart,\n      U = _ne$P.autoTranscribe,\n      h = _ne$P.mode,\n      B = _ne$P.nonStop,\n      M = _ne$P.removeSilence,\n      q = _ne$P.stopTimeout,\n      S = _ne$P.streaming,\n      I = _ne$P.timeSlice,\n      c$1 = _ne$P.whisperConfig,\n      K = _ne$P.onDataAvailable,\n      T = _ne$P.onTranscribe;\n    if (!m && !T) throw new Error(\"apiKey is required if onTranscribe is not provided\");\n    var f = useRef([]),\n      i = useRef(),\n      s = useRef(),\n      t = useRef(),\n      a = useRef(),\n      d$1 = useRef(oe),\n      _useState = useState(!1),\n      _useState2 = _slicedToArray(_useState, 2),\n      O = _useState2[0],\n      k = _useState2[1],\n      _useState3 = useState(!1),\n      _useState4 = _slicedToArray(_useState3, 2),\n      $ = _useState4[0],\n      C = _useState4[1],\n      _useState5 = useState(!1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      j = _useState6[0],\n      g = _useState6[1],\n      _useState7 = useState(ae),\n      _useState8 = _slicedToArray(_useState7, 2),\n      z = _useState8[0],\n      l = _useState8[1];\n    useEffect(function () {\n      return function () {\n        f.current && (f.current = []), i.current && (i.current.flush(), i.current = void 0), t.current && (t.current.destroy(), t.current = void 0), b$1(\"stop\"), s.current && (s.current.off(\"speaking\", R), s.current.off(\"stopped_speaking\", v)), a.current && (a.current.getTracks().forEach(function (e) {\n          return e.stop();\n        }), a.current = void 0);\n      };\n    }, []), useEffectAsync( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.t0 = A;\n            if (!_context.t0) {\n              _context.next = 4;\n              break;\n            }\n            _context.next = 4;\n            return W();\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    })), [A]);\n    var N = /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n          return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n            while (1) switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return W();\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }, _callee2);\n        }));\n        return function N() {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      G = /*#__PURE__*/function () {\n        var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n          return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n            while (1) switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return V();\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }, _callee3);\n        }));\n        return function G() {\n          return _ref3.apply(this, arguments);\n        };\n      }(),\n      J = /*#__PURE__*/function () {\n        var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n          return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n            while (1) switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return E();\n              case 2:\n              case \"end\":\n                return _context4.stop();\n            }\n          }, _callee4);\n        }));\n        return function J() {\n          return _ref4.apply(this, arguments);\n        };\n      }(),\n      W = /*#__PURE__*/function () {\n        var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n          var _yield$import, _yield$import$default, r, o, n, _yield$import2, _r, e;\n          return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n            while (1) switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.t0 = a.current;\n                if (_context5.t0) {\n                  _context5.next = 5;\n                  break;\n                }\n                _context5.next = 5;\n                return Q();\n              case 5:\n                if (!a.current) {\n                  _context5.next = 34;\n                  break;\n                }\n                if (t.current) {\n                  _context5.next = 15;\n                  break;\n                }\n                _context5.next = 9;\n                return import('recordrtc');\n              case 9:\n                _yield$import = _context5.sent;\n                _yield$import$default = _yield$import.default;\n                r = _yield$import$default.RecordRTCPromisesHandler;\n                o = _yield$import$default.StereoAudioRecorder;\n                n = {\n                  mimeType: \"audio/wav\",\n                  numberOfAudioChannels: 1,\n                  recorderType: o,\n                  sampleRate: 44100,\n                  timeSlice: S ? I : void 0,\n                  type: \"audio\",\n                  ondataavailable: U && S ? Z : void 0\n                };\n                t.current = new r(a.current, n);\n              case 15:\n                if (i.current) {\n                  _context5.next = 21;\n                  break;\n                }\n                _context5.next = 18;\n                return import('lamejs');\n              case 18:\n                _yield$import2 = _context5.sent;\n                _r = _yield$import2.Mp3Encoder;\n                i.current = new _r(1, 44100, 96);\n              case 21:\n                _context5.next = 23;\n                return t.current.getState();\n              case 23:\n                e = _context5.sent;\n                _context5.t1 = e === \"inactive\" || e === \"stopped\";\n                if (!_context5.t1) {\n                  _context5.next = 28;\n                  break;\n                }\n                _context5.next = 28;\n                return t.current.startRecording();\n              case 28:\n                _context5.t2 = e === \"paused\";\n                if (!_context5.t2) {\n                  _context5.next = 32;\n                  break;\n                }\n                _context5.next = 32;\n                return t.current.resumeRecording();\n              case 32:\n                B && x(\"stop\");\n                k(!0);\n              case 34:\n                _context5.next = 38;\n                break;\n              case 36:\n                _context5.prev = 36;\n                _context5.t3 = _context5[\"catch\"](0);\n              case 38:\n              case \"end\":\n                return _context5.stop();\n            }\n          }, _callee5, null, [[0, 36]]);\n        }));\n        return function W() {\n          return _ref5.apply(this, arguments);\n        };\n      }(),\n      Q = /*#__PURE__*/function () {\n        var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n          var _yield$import3, e;\n          return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n            while (1) switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                a.current && a.current.getTracks().forEach(function (e) {\n                  return e.stop();\n                });\n                _context6.next = 4;\n                return navigator.mediaDevices.getUserMedia({\n                  audio: !0\n                });\n              case 4:\n                a.current = _context6.sent;\n                if (s.current) {\n                  _context6.next = 11;\n                  break;\n                }\n                _context6.next = 8;\n                return import('hark');\n              case 8:\n                _yield$import3 = _context6.sent;\n                e = _yield$import3.default;\n                s.current = e(a.current, {\n                  interval: 100,\n                  play: !1\n                }), s.current.on(\"speaking\", R), s.current.on(\"stopped_speaking\", v);\n              case 11:\n                _context6.next = 15;\n                break;\n              case 13:\n                _context6.prev = 13;\n                _context6.t0 = _context6[\"catch\"](0);\n              case 15:\n              case \"end\":\n                return _context6.stop();\n            }\n          }, _callee6, null, [[0, 13]]);\n        }));\n        return function Q() {\n          return _ref6.apply(this, arguments);\n        };\n      }(),\n      x = function x(e) {\n        d$1.current[e] || (d$1.current[e] = setTimeout(E, q));\n      },\n      R = function R() {\n        C(!0), b$1(\"stop\");\n      },\n      v = function v() {\n        C(!1), B && x(\"stop\");\n      },\n      V = /*#__PURE__*/function () {\n        var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n          return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n            while (1) switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                _context7.t0 = t.current;\n                if (!_context7.t0) {\n                  _context7.next = 12;\n                  break;\n                }\n                _context7.next = 5;\n                return t.current.getState();\n              case 5:\n                _context7.t1 = _context7.sent;\n                _context7.t2 = _context7.t1 === \"recording\";\n                if (!_context7.t2) {\n                  _context7.next = 10;\n                  break;\n                }\n                _context7.next = 10;\n                return t.current.pauseRecording();\n              case 10:\n                b$1(\"stop\");\n                k(!1);\n              case 12:\n                _context7.next = 16;\n                break;\n              case 14:\n                _context7.prev = 14;\n                _context7.t3 = _context7[\"catch\"](0);\n              case 16:\n              case \"end\":\n                return _context7.stop();\n            }\n          }, _callee7, null, [[0, 14]]);\n        }));\n        return function V() {\n          return _ref7.apply(this, arguments);\n        };\n      }(),\n      E = /*#__PURE__*/function () {\n        var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n          var e, r;\n          return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n            while (1) switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n                if (!t.current) {\n                  _context8.next = 26;\n                  break;\n                }\n                _context8.next = 4;\n                return t.current.getState();\n              case 4:\n                e = _context8.sent;\n                _context8.t0 = e === \"recording\" || e === \"paused\";\n                if (!_context8.t0) {\n                  _context8.next = 9;\n                  break;\n                }\n                _context8.next = 9;\n                return t.current.stopRecording();\n              case 9:\n                X();\n                b$1(\"stop\");\n                k(!1);\n                if (!U) {\n                  _context8.next = 17;\n                  break;\n                }\n                _context8.next = 15;\n                return Y();\n              case 15:\n                _context8.next = 21;\n                break;\n              case 17:\n                _context8.next = 19;\n                return t.current.getBlob();\n              case 19:\n                r = _context8.sent;\n                l({\n                  blob: r\n                });\n              case 21:\n                _context8.next = 23;\n                return t.current.destroy();\n              case 23:\n                f.current = [];\n                i.current && (i.current.flush(), i.current = void 0);\n                t.current = void 0;\n              case 26:\n                _context8.next = 30;\n                break;\n              case 28:\n                _context8.prev = 28;\n                _context8.t1 = _context8[\"catch\"](0);\n              case 30:\n              case \"end\":\n                return _context8.stop();\n            }\n          }, _callee8, null, [[0, 28]]);\n        }));\n        return function E() {\n          return _ref8.apply(this, arguments);\n        };\n      }(),\n      X = function X() {\n        s.current && (s.current.off(\"speaking\", R), s.current.off(\"stopped_speaking\", v), s.current = void 0), a.current && (a.current.getTracks().forEach(function (e) {\n          return e.stop();\n        }), a.current = void 0);\n      },\n      b$1 = function b$1(e) {\n        d$1.current[e] && (clearTimeout(d$1.current[e]), d$1.current[e] = void 0);\n      },\n      Y = /*#__PURE__*/function () {\n        var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {\n          var r, _yield$import4, o, n, u, w, _o, _n, _o2, _o3, _n2;\n          return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n            while (1) switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.prev = 0;\n                _context9.t0 = i.current && t.current;\n                if (!_context9.t0) {\n                  _context9.next = 7;\n                  break;\n                }\n                _context9.next = 5;\n                return t.current.getState();\n              case 5:\n                _context9.t1 = _context9.sent;\n                _context9.t0 = _context9.t1 === \"stopped\";\n              case 7:\n                if (!_context9.t0) {\n                  _context9.next = 53;\n                  break;\n                }\n                g(!0);\n                _context9.next = 11;\n                return t.current.getBlob();\n              case 11:\n                r = _context9.sent;\n                if (!M) {\n                  _context9.next = 35;\n                  break;\n                }\n                _context9.next = 15;\n                return import('@ffmpeg/ffmpeg');\n              case 15:\n                _yield$import4 = _context9.sent;\n                o = _yield$import4.createFFmpeg;\n                n = o({\n                  mainName: \"main\",\n                  corePath: b,\n                  log: !0\n                });\n                _context9.t2 = n.isLoaded();\n                if (_context9.t2) {\n                  _context9.next = 22;\n                  break;\n                }\n                _context9.next = 22;\n                return n.load();\n              case 22:\n                _context9.next = 24;\n                return r.arrayBuffer();\n              case 24:\n                u = _context9.sent;\n                n.FS(\"writeFile\", \"in.wav\", new Uint8Array(u));\n                _context9.next = 28;\n                return n.run(\"-i\", \"in.wav\", \"-acodec\", \"libmp3lame\", \"-b:a\", \"96k\", \"-ar\", \"44100\", \"-af\", c, \"out.mp3\");\n              case 28:\n                w = n.FS(\"readFile\", \"out.mp3\");\n                if (!(w.length <= 225)) {\n                  _context9.next = 32;\n                  break;\n                }\n                n.exit(), l({\n                  blob: r\n                }), g(!1);\n                return _context9.abrupt(\"return\");\n              case 32:\n                r = new Blob([w.buffer], {\n                  type: \"audio/mpeg\"\n                }), n.exit();\n                _context9.next = 40;\n                break;\n              case 35:\n                _context9.next = 37;\n                return r.arrayBuffer();\n              case 37:\n                _o = _context9.sent;\n                _n = i.current.encodeBuffer(new Int16Array(_o));\n                r = new Blob([_n], {\n                  type: \"audio/mpeg\"\n                });\n              case 40:\n                if (!(typeof T == \"function\")) {\n                  _context9.next = 47;\n                  break;\n                }\n                _context9.next = 43;\n                return T(r);\n              case 43:\n                _o2 = _context9.sent;\n                l(_o2);\n                _context9.next = 52;\n                break;\n              case 47:\n                _o3 = new File([r], \"speech.mp3\", {\n                  type: \"audio/mpeg\"\n                });\n                _context9.next = 50;\n                return F(_o3);\n              case 50:\n                _n2 = _context9.sent;\n                l({\n                  blob: r,\n                  text: _n2\n                });\n              case 52:\n                g(!1);\n              case 53:\n                _context9.next = 58;\n                break;\n              case 55:\n                _context9.prev = 55;\n                _context9.t3 = _context9[\"catch\"](0);\n                g(!1);\n              case 58:\n              case \"end\":\n                return _context9.stop();\n            }\n          }, _callee9, null, [[0, 55]]);\n        }));\n        return function Y() {\n          return _ref9.apply(this, arguments);\n        };\n      }(),\n      Z = /*#__PURE__*/function () {\n        var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(e) {\n          var o, n, u, _o4, _n3, _u;\n          return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n            while (1) switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.prev = 0;\n                if (!(S && t.current)) {\n                  _context10.next = 19;\n                  break;\n                }\n                if (!(K !== null && K !== void 0 && K(e), i.current)) {\n                  _context10.next = 9;\n                  break;\n                }\n                _context10.next = 5;\n                return e.arrayBuffer();\n              case 5:\n                o = _context10.sent;\n                n = i.current.encodeBuffer(new Int16Array(o));\n                u = new Blob([n], {\n                  type: \"audio/mpeg\"\n                });\n                f.current.push(u);\n              case 9:\n                _context10.next = 11;\n                return t.current.getState();\n              case 11:\n                _context10.t0 = _context10.sent;\n                if (!(_context10.t0 === \"recording\")) {\n                  _context10.next = 19;\n                  break;\n                }\n                _o4 = new Blob(f.current, {\n                  type: \"audio/mpeg\"\n                });\n                _n3 = new File([_o4], \"speech.mp3\", {\n                  type: \"audio/mpeg\"\n                });\n                _context10.next = 17;\n                return F(_n3);\n              case 17:\n                _u = _context10.sent;\n                _u && l(function (w) {\n                  return _objectSpread(_objectSpread({}, w), {}, {\n                    text: _u\n                  });\n                });\n              case 19:\n                _context10.next = 23;\n                break;\n              case 21:\n                _context10.prev = 21;\n                _context10.t1 = _context10[\"catch\"](0);\n              case 23:\n              case \"end\":\n                return _context10.stop();\n            }\n          }, _callee10, null, [[0, 21]]);\n        }));\n        return function Z(_x) {\n          return _ref10.apply(this, arguments);\n        };\n      }(),\n      F = useMemoAsync( /*#__PURE__*/function () {\n        var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(e) {\n          var _c$1$language;\n          var r, o, _yield$import5, n;\n          return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n            while (1) switch (_context11.prev = _context11.next) {\n              case 0:\n                r = new FormData();\n                r.append(\"file\", e), r.append(\"model\", \"whisper-1\"), h === \"transcriptions\" && r.append(\"language\", (_c$1$language = c$1 === null || c$1 === void 0 ? void 0 : c$1.language) !== null && _c$1$language !== void 0 ? _c$1$language : \"en\"), c$1 !== null && c$1 !== void 0 && c$1.prompt && r.append(\"prompt\", c$1.prompt), c$1 !== null && c$1 !== void 0 && c$1.response_format && r.append(\"response_format\", c$1.response_format), (c$1 === null || c$1 === void 0 ? void 0 : c$1.temperature) && r.append(\"temperature\", \"\".concat(c$1.temperature));\n                o = {};\n                o[\"Content-Type\"] = \"multipart/form-data\", m && (o.Authorization = \"Bearer \".concat(m));\n                _context11.next = 6;\n                return import('axios');\n              case 6:\n                _yield$import5 = _context11.sent;\n                n = _yield$import5.default;\n                _context11.next = 10;\n                return n.post(d + h, r, {\n                  headers: o\n                });\n              case 10:\n                return _context11.abrupt(\"return\", _context11.sent.data.text);\n              case 11:\n              case \"end\":\n                return _context11.stop();\n            }\n          }, _callee11);\n        }));\n        return function (_x2) {\n          return _ref11.apply(this, arguments);\n        };\n      }(), [m, h, c$1]);\n    return {\n      recording: O,\n      speaking: $,\n      transcribing: j,\n      transcript: z,\n      pauseRecording: G,\n      startRecording: N,\n      stopRecording: J\n    };\n  };\nexport { ue as a };","map":{"version":3,"names":["b","c","d","useEffectAsync","useMemoAsync","useRef","useState","useEffect","ne","apiKey","autoStart","autoTranscribe","mode","nonStop","removeSilence","stopTimeout","streaming","timeSlice","onDataAvailable","onTranscribe","oe","stop","ae","blob","text","ue","P","_ne$P","_objectSpread","m","A","U","h","B","M","q","S","I","c$1","whisperConfig","K","T","Error","f","i","s","t","a","d$1","_useState","_useState2","_slicedToArray","O","k","_useState3","_useState4","$","C","_useState5","_useState6","j","g","_useState7","_useState8","z","l","current","flush","destroy","b$1","off","R","v","getTracks","forEach","e","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","t0","W","N","_ref2","_callee2","_callee2$","_context2","apply","arguments","G","_ref3","_callee3","_callee3$","_context3","V","J","_ref4","_callee4","_callee4$","_context4","E","_ref5","_callee5","_yield$import","_yield$import$default","r","o","n","_yield$import2","_r","_callee5$","_context5","Q","sent","default","RecordRTCPromisesHandler","StereoAudioRecorder","mimeType","numberOfAudioChannels","recorderType","sampleRate","type","ondataavailable","Z","Mp3Encoder","getState","t1","startRecording","t2","resumeRecording","x","t3","_ref6","_callee6","_yield$import3","_callee6$","_context6","navigator","mediaDevices","getUserMedia","audio","interval","play","on","setTimeout","_ref7","_callee7","_callee7$","_context7","pauseRecording","_ref8","_callee8","_callee8$","_context8","stopRecording","X","Y","getBlob","clearTimeout","_ref9","_callee9","_yield$import4","u","w","_o","_n","_o2","_o3","_n2","_callee9$","_context9","createFFmpeg","mainName","corePath","log","isLoaded","load","arrayBuffer","FS","Uint8Array","run","length","exit","abrupt","Blob","buffer","encodeBuffer","Int16Array","File","F","_ref10","_callee10","_o4","_n3","_u","_callee10$","_context10","push","_x","_ref11","_callee11","_c$1$language","_yield$import5","_callee11$","_context11","FormData","append","language","prompt","response_format","temperature","concat","Authorization","post","headers","data","_x2","recording","speaking","transcribing","transcript"],"sources":["/Users/michaelli/Desktop/the-roast/frontend/node_modules/@chengsokdara/use-whisper/dist/chunk-32KRFHOA.js"],"sourcesContent":["import { b, c, d } from './chunk-VO7VPLVP.js';\nimport { useEffectAsync, useMemoAsync } from '@chengsokdara/react-hooks-async';\nimport { useRef, useState, useEffect } from 'react';\n\nvar ne={apiKey:\"\",autoStart:!1,autoTranscribe:!0,mode:\"transcriptions\",nonStop:!1,removeSilence:!1,stopTimeout:5e3,streaming:!1,timeSlice:1e3,onDataAvailable:void 0,onTranscribe:void 0},oe={stop:void 0},ae={blob:void 0,text:void 0},ue=P=>{let{apiKey:m,autoStart:A,autoTranscribe:U,mode:h,nonStop:B,removeSilence:M,stopTimeout:q,streaming:S,timeSlice:I,whisperConfig:c$1,onDataAvailable:K,onTranscribe:T}={...ne,...P};if(!m&&!T)throw new Error(\"apiKey is required if onTranscribe is not provided\");let f=useRef([]),i=useRef(),s=useRef(),t=useRef(),a=useRef(),d$1=useRef(oe),[O,k]=useState(!1),[$,C]=useState(!1),[j,g]=useState(!1),[z,l]=useState(ae);useEffect(()=>()=>{f.current&&(f.current=[]),i.current&&(i.current.flush(),i.current=void 0),t.current&&(t.current.destroy(),t.current=void 0),b$1(\"stop\"),s.current&&(s.current.off(\"speaking\",R),s.current.off(\"stopped_speaking\",v)),a.current&&(a.current.getTracks().forEach(e=>e.stop()),a.current=void 0);},[]),useEffectAsync(async()=>{A&&await W();},[A]);let N=async()=>{await W();},G=async()=>{await V();},J=async()=>{await E();},W=async()=>{try{if(a.current||await Q(),a.current){if(!t.current){let{default:{RecordRTCPromisesHandler:r,StereoAudioRecorder:o}}=await import('recordrtc'),n={mimeType:\"audio/wav\",numberOfAudioChannels:1,recorderType:o,sampleRate:44100,timeSlice:S?I:void 0,type:\"audio\",ondataavailable:U&&S?Z:void 0};t.current=new r(a.current,n);}if(!i.current){let{Mp3Encoder:r}=await import('lamejs');i.current=new r(1,44100,96);}let e=await t.current.getState();(e===\"inactive\"||e===\"stopped\")&&await t.current.startRecording(),e===\"paused\"&&await t.current.resumeRecording(),B&&x(\"stop\"),k(!0);}}catch{}},Q=async()=>{try{if(a.current&&a.current.getTracks().forEach(e=>e.stop()),a.current=await navigator.mediaDevices.getUserMedia({audio:!0}),!s.current){let{default:e}=await import('hark');s.current=e(a.current,{interval:100,play:!1}),s.current.on(\"speaking\",R),s.current.on(\"stopped_speaking\",v);}}catch{}},x=e=>{d$1.current[e]||(d$1.current[e]=setTimeout(E,q));},R=()=>{C(!0),b$1(\"stop\");},v=()=>{C(!1),B&&x(\"stop\");},V=async()=>{try{t.current&&(await t.current.getState()===\"recording\"&&await t.current.pauseRecording(),b$1(\"stop\"),k(!1));}catch{}},E=async()=>{try{if(t.current){let e=await t.current.getState();if((e===\"recording\"||e===\"paused\")&&await t.current.stopRecording(),X(),b$1(\"stop\"),k(!1),U)await Y();else {let r=await t.current.getBlob();l({blob:r});}await t.current.destroy(),f.current=[],i.current&&(i.current.flush(),i.current=void 0),t.current=void 0;}}catch{}},X=()=>{s.current&&(s.current.off(\"speaking\",R),s.current.off(\"stopped_speaking\",v),s.current=void 0),a.current&&(a.current.getTracks().forEach(e=>e.stop()),a.current=void 0);},b$1=e=>{d$1.current[e]&&(clearTimeout(d$1.current[e]),d$1.current[e]=void 0);},Y=async()=>{try{if(i.current&&t.current&&await t.current.getState()===\"stopped\"){g(!0);let r=await t.current.getBlob();if(M){let{createFFmpeg:o}=await import('@ffmpeg/ffmpeg'),n=o({mainName:\"main\",corePath:b,log:!0});n.isLoaded()||await n.load();let u=await r.arrayBuffer();n.FS(\"writeFile\",\"in.wav\",new Uint8Array(u)),await n.run(\"-i\",\"in.wav\",\"-acodec\",\"libmp3lame\",\"-b:a\",\"96k\",\"-ar\",\"44100\",\"-af\",c,\"out.mp3\");let w=n.FS(\"readFile\",\"out.mp3\");if(w.length<=225){n.exit(),l({blob:r}),g(!1);return}r=new Blob([w.buffer],{type:\"audio/mpeg\"}),n.exit();}else {let o=await r.arrayBuffer(),n=i.current.encodeBuffer(new Int16Array(o));r=new Blob([n],{type:\"audio/mpeg\"});}if(typeof T==\"function\"){let o=await T(r);l(o);}else {let o=new File([r],\"speech.mp3\",{type:\"audio/mpeg\"}),n=await F(o);l({blob:r,text:n});}g(!1);}}catch{g(!1);}},Z=async e=>{try{if(S&&t.current){if(K?.(e),i.current){let o=await e.arrayBuffer(),n=i.current.encodeBuffer(new Int16Array(o)),u=new Blob([n],{type:\"audio/mpeg\"});f.current.push(u);}if(await t.current.getState()===\"recording\"){let o=new Blob(f.current,{type:\"audio/mpeg\"}),n=new File([o],\"speech.mp3\",{type:\"audio/mpeg\"}),u=await F(n);u&&l(w=>({...w,text:u}));}}}catch{}},F=useMemoAsync(async e=>{let r=new FormData;r.append(\"file\",e),r.append(\"model\",\"whisper-1\"),h===\"transcriptions\"&&r.append(\"language\",c$1?.language??\"en\"),c$1?.prompt&&r.append(\"prompt\",c$1.prompt),c$1?.response_format&&r.append(\"response_format\",c$1.response_format),c$1?.temperature&&r.append(\"temperature\",`${c$1.temperature}`);let o={};o[\"Content-Type\"]=\"multipart/form-data\",m&&(o.Authorization=`Bearer ${m}`);let{default:n}=await import('axios');return (await n.post(d+h,r,{headers:o})).data.text},[m,h,c$1]);return {recording:O,speaking:$,transcribing:j,transcript:z,pauseRecording:G,startRecording:N,stopRecording:J}};\n\nexport { ue as a };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}